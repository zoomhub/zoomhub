<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ZoomHub · Share and view high-resolution images effortlessly</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="favicon.ico" />

    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon-precomposed"
      href="/apple-touch-icon-precomposed.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/apple-touch-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/apple-touch-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/apple-touch-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="167x167"
      href="/apple-touch-icon-167x167.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon-180x180.png"
    />

    <!-- Google Analytics -->
    <script>
      ;(function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r
        ;(i[r] =
          i[r] ||
          function () {
            ;(i[r].q = i[r].q || []).push(arguments)
          }),
          (i[r].l = 1 * new Date())
        ;(a = s.createElement(o)), (m = s.getElementsByTagName(o)[0])
        a.async = 1
        a.src = g
        m.parentNode.insertBefore(a, m)
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      )

      ga("create", "UA-55808703-1", "auto")
      ga("_setDomainName", "zoomhub.net")
      ga("_setAllowLinker", true)
      ga("send", "pageview")
    </script>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        background-color: #fafafa;
        color: #222;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 16px;
        height: 100%;
        line-height: 1.5em;
        margin: 0;
        padding: 0.5em 0 3em;
        width: 100%;
      }

      .container {
        margin: 0 auto;
        max-width: 36em;
        width: 80%;
      }

      .logo {
        text-align: center;
        font-size: 360%;
        letter-spacing: -4px;
      }

      .logo .small-caps {
        font-size: 1.08em;
      }

      .mark {
        color: #111;
        font-weight: bold;
      }

      .card {
        background-color: #fff;
        box-shadow: 0 0 #0000, 0 0 #0000, 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      a {
        color: #f60;
        font-weight: bold;
        text-decoration: none;
      }

      a.secondary {
        color: #333;
        font-weight: normal;
        border-bottom: 1px dashed;
      }

      section {
        padding-top: 1rem;
        padding-bottom: 1.5rem;
        border-bottom: 2px solid #f0f0f0;
      }

      section:first-child {
        border-bottom: none;
      }

      h2 {
        font-size: 1.75rem;
        line-height: 2rem;
      }

      h3 a {
        color: #333;
      }

      p {
        margin-bottom: 1em;
      }

      ol {
        padding-inline-start: 20px;
      }

      footer {
        color: #ccc;
        font-size: 0.8em;
        margin-top: 2em;
        text-align: center;
      }

      footer a {
        color: #ccc;
        font-weight: normal;
        text-decoration: underline;
      }

      /* Upload */
      .upload-card {
        border-radius: 8px;
        padding: 1.5em 2em;
      }
      .upload-card h2 {
        margin-top: 0;
      }
      .upload-card ol li {
        padding: 0.4em 0;
      }

      /* Bootstrap 5*/
      .form-control {
        display: block;
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      }

      .lead {
        font-size: 20px;
        line-height: 1.4em;
      }
    </style>

    <!-- MailChimp -->
    <style type="text/css">
      /*
      Adapted from:
      http://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css
    */
      #mc_embed_signup form {
        text-align: center;
        padding: 10px 0 10px 0;
      }

      .mc-field-group {
        display: inline-block;
      }

      /* positions input field horizontally */
      #mc_embed_signup input.email {
        background-color: #fff;
        border-radius: 3px;
        border: 2px solid #f2c779;
        color: #444;
        display: inline-block;
        font-size: 15px;
        font-weight: bold;
        height: 36px;
        margin: 0;
        padding: 0 0.6em;
        vertical-align: top;
        width: 60%;
      }

      #mc_embed_signup label {
        display: block;
        font-size: 18px;
        padding-bottom: 10px;
        font-weight: bold;
      }

      #mc_embed_signup .clear {
        display: inline-block;
      }

      /* positions button horizontally in line with input */
      #mc_embed_signup .button {
        background-color: #e1a73d;
        border-radius: 3px;
        border: none;
        color: #fff;
        display: inline-block;
        font-size: 14px;
        height: 36px;
        letter-spacing: 0.03em;
        line-height: 36px;
        margin: 0;
        padding: 0 18px;
        transition: all 0.23s ease-in-out 0s;
      }

      #mc_embed_signup .button:hover,
      #mc_embed_signup .button:focus {
        background-color: #b77807;
        cursor: pointer;
      }

      #mc_embed_signup div#mce-responses {
        float: left;
        top: -1.4em;
        padding: 0em 0.5em 0em 0.5em;
        overflow: hidden;
        width: 90%;
        margin: 0 5%;
        clear: both;
      }

      #mc_embed_signup div.response {
        margin: 1em 0;
        padding: 1em 0.5em 0.5em 0;
        font-weight: bold;
        float: left;
        top: -1.5em;
        z-index: 1;
        width: 80%;
      }

      #mc_embed_signup #mce-error-response {
        display: none;
      }

      #mc_embed_signup #mce-success-response {
        color: #529214;
        display: none;
      }

      #mc_embed_signup label.error {
        display: block;
        float: none;
        width: auto;
        margin-left: 1.05em;
        text-align: left;
        padding: 0.5em 0;
      }

      /* Mobile */
      @media (max-width: 768px) {
        #mc_embed_signup input.email {
          width: 90%;
          margin-bottom: 5px;
        }

        #mc_embed_signup .clear {
          display: block;
          width: 100%;
        }

        #mc_embed_signup .button {
          width: 90%;
          margin: 0;
        }
      }

      /* Placeholders */
      #mc_embed_signup ::placeholder {
        color: #f2c779;
      }

      #mc_embed_signup {
        background-color: #fff8c4;
        color: #e1a73d;
        border: 2px solid #f2c779;
        border-radius: 4px;
        margin-top: 1em;
        margin-bottom: 1em;
        padding: 0.8em 0.8em 1.3em;
      }
    </style>
  </head>

  <body>
    <header class="container">
      <h1 class="logo">
        Z<span class="small-caps">oom</span>H<span class="small-caps">ub</span>
      </h1>
    </header>

    <script src="/w2O0D.js?width=auto&amp;height=340px"></script>

    <!-- Begin MailChimp Signup Form -->
    <div id="mc_embed_signup" class="container" style="display: none">
      <form
        action="//zoomhub.us13.list-manage.com/subscribe/post?u=634c214865be13f62c4793888&amp;id=0236bc1b9e"
        method="post"
        id="mc-embedded-subscribe-form"
        name="mc-embedded-subscribe-form"
        class="validate"
        target="_blank"
        novalidate
      >
        <div id="mc_embed_signup_scroll">
          <label for="mce-EMAIL">
            Get notified when ZoomHub accepts new submissions!
          </label>
          <input
            type="email"
            value=""
            name="EMAIL"
            class="email"
            id="mce-EMAIL"
            placeholder="Your email"
            required
          />
          <!--
          real people should not fill this in and expect good things —
          do not remove this or risk form bot signups
        -->
          <div style="position: absolute; left: -5000px" aria-hidden="true">
            <input
              type="text"
              name="b_634c214865be13f62c4793888_0236bc1b9e"
              tabindex="-1"
              value=""
            />
          </div>
          <div class="clear">
            <input
              type="submit"
              value="Subscribe"
              name="subscribe"
              id="mc-embedded-subscribe"
              class="button"
            />
          </div>
        </div>
      </form>
    </div>
    <!--End mc_embed_signup-->

    <article class="container">
      <section id="submit">
        <div class="upload-card card" style="display: none; margin-top: 1em">
          <div class="instructions">
            <h2 class="cta">Create your own in 3 easy steps…</h2>
            <form class="upload-form">
              <ol>
                <li>
                  Pick an image to upload:<br />
                  <input
                    class="form-control"
                    type="file"
                    name="content"
                    accept="image/png,image/jpeg"
                    style="padding: 1em; margin-top: 0.3em"
                    required
                  />
                </li>
                <li>
                  Give us your email so we can send you a link when it’s
                  ready*:<br />
                  <input
                    class="form-control"
                    type="email"
                    name="email"
                    style="margin-top: 0.3em"
                    required
                    placeholder="you@example.com"
                  />
                </li>
                <li>
                  <input
                    type="submit"
                    value="Upload image"
                    name="submit"
                    style="
                      background-color: #f60;
                      border-color: #f60;
                      border-radius: 0.25rem;
                      color: #fff;
                      font-size: 16px;
                      line-height: 1.5;
                      padding: 0.375rem 0.75rem;
                    "
                  />
                </li>
              </ol>

              <span style="color: #aaa; font-size: 14px">
                * We won’t spam you or share your email — promise!
              </span>
            </form>
          </div>

          <div class="progress" style="display: none">
            <h2>⬆️ Uploading…</h2>
            <div class="lead">Hang tight, we’re uploading your image.</div>
          </div>

          <div class="thanks" style="display: none">
            <h2>🎉 Success!</h2>
            <div class="lead">
              📩 Check your email. We just sent you the link to view your
              upload.
            </div>
          </div>
        </div>
      </section>

      <section id="about">
        <h2>What is it?</h2>
        <p class="lead">
          <span class="mark">ZoomHub</span> lets you share &amp; view your
          high-resolution images seamlessly and blazingly fast, no matter
          whether you are on a desktop computer, tablet, or mobile phone.
        </p>
        <p class="lead">
          Play around with the demo above and experience it yourself!
        </p>
      </section>

      <section id="examples">
        <h2>Examples</h2>
        <h3>
          <a href="/L8wh">NASA: Earth at Night</a>
        </h3>
        <p>
          <script src="/L8wh.js?width=auto&amp;height=340px"></script>
        </p>

        <h3>
          <a href="/STK4">Pieter Bruegel the Elder: The Tower of Babel</a>
        </h3>
        <p>
          <script src="/STK4.js?width=auto&amp;height=340px"></script>
        </p>

        <h3>
          <a href="/Xjce">Luis Romero Martinez: Manglar en Emergencia</a>
        </h3>
        <p>
          <script src="/Xjce.js?width=auto&amp;height=340px"></script>
        </p>
      </section>

      <section id="participate">
        <h2>Get involved!</h2>
        <ul>
          <li>
            Want to integrate <span class="mark">ZoomHub</span> into your app?
            Check out our
            <a href="https://github.com/zoomhub/zoomhub/blob/master/API.md"
              >API</a
            >.
          </li>
          <li>
            Looking for the latest news? Follow us on Twitter:
            <a href="https://twitter.com/zoomhub">@ZoomHub</a>.
          </li>
          <li>
            Need help? Join the
            <a href="https://groups.google.com/group/zoomhub">mailing list</a>.
          </li>
          <li>
            Found a bug or typo?
            <a href="https://github.com/zoomhub/zoomhub/issues">File an issue</a
            >.
          </li>
          <li>
            Want to contribute a new feature? Check out the
            <a href="https://github.com/zoomhub/zoomhub">code</a>.
          </li>
        </ul>
      </section>

      <footer>
        <p>Powered by <a href="https://www.haskell.org">Haskell</a> ❤️</p>
      </footer>
    </article>
    <script>
      ;(async () => {
        const apiConfig = await fetch("/v1/config").then((_) => _.json())

        console.log("API configuration:", apiConfig)
        const sectionSelector = apiConfig.uploadsEnabled
          ? ".upload-card"
          : "#mc_embed_signup"
        const sectionElement = document.querySelector(sectionSelector)
        sectionElement.style.display = "block"

        async function upload(file) {
          // TODO: Handle errors
          const email = document.querySelector(
            '.upload-form input[name="email"]'
          ).value

          // TODO: Handle errors
          const presignedPostData = await fetch(
            "/v1/content/upload?email=" + email
          ).then((response) => response.json())
          const formData = new FormData()
          Object.entries(presignedPostData)
            .filter(([key, _]) => key !== "url")
            .forEach(([key, value]) => {
              formData.append(key, value)
            })
          formData.append("file", file)

          let uploadResponse
          try {
            uploadResponse = await fetch(presignedPostData.url, {
              method: "POST",
              body: formData,
            })
          } catch (error) {
            alert("Oops! Something went wrong. Please try again later.")
            console.error("Failed upload content:", error)
            return
          }

          if (uploadResponse.status !== 200) {
            alert("Oops! Something went wrong. Please try again later.")
            console.error(
              `Upload error: ${uploadResponse.status} (${uploadResponse.statusText})`
            )
            return
          }

          // TODO: Handle error cases
          let contentData
          try {
            contentData = await fetch(uploadResponse.url).then((response) =>
              response.json()
            )
          } catch (error) {
            alert("Oops! Something went wrong. Please try again later.")
            console.error("Failed to fetch content:", error)
          }

          // Redirect to view page
          // location.href = contentData.shareUrl
          showThanks()
        }

        const showSection = (section) => {
          ;["instructions", "progress", "thanks"].forEach((currentSection) => {
            const sectionElement = document.querySelector(`.${currentSection}`)
            sectionElement.style.display =
              section === currentSection ? "block" : "none"
            sectionElement.scrollIntoView({
              behavior: "smooth",
              block: "center",
            })
          })
        }

        const showProgress = () => showSection("progress")
        const showThanks = () => showSection("thanks")

        const fileInput = document.querySelector(
          ".upload-form input[type='file']"
        )
        let file = null
        if (fileInput) {
          fileInput.addEventListener("change", (event) => {
            if (!event.target.files || event.target.files.length === 0) {
              alert("Please choose a file")
            }
            file = event.target.files[0]
            event.preventDefault()
          })
        }

        const form = document.querySelector(".upload-form")
        if (form) {
          form.addEventListener("submit", (event) => {
            event.preventDefault()
            if (!file) {
              return
            }

            showProgress()
            upload(file)
          })
        }
      })()
    </script>
  </body>
</html>
